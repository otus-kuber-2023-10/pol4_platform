# Выполнено ДЗ №1

1.1 Разберитесь почему все pod в namespace kube-system восстановились
после удаления. Укажите причину в описании PR

Результат анализа - после удаления подов напрямую из докера у меня pod-ы не восстановились и в случае
с minikube не должны были. Ручное удаление любых или всех pod-ов через kubectl приводит к их восстановлению.

Логика работы minikube следующая:
- 1. После старта containerd создаёт нужный набор namespace (в терминах Linux) (mnt, pid, cgroup, ipc, utc).
- 2. В этих пространствах имён ОС запускается "контейнер", который содержит unit systemd kubelet.service,
настроенный на автоматический перезапуск в случае падения.
- 3. kubelet читает манифесты и запускает в соответствии с их настройками контроллеры control plane (etcd, apiserver, control-manager, scheduler)
- 4. Два оставшиеся сервиса control plane запускаются уже scheduler-ом (coredns - в схеме ReplicaSet, а kube-proxy в схеме DaemonSet)

Надёжность этой схемы крайне ограничена, т.к. остановка сервиса kubelet гарантирует невозможность восстановления любого из сервисов.
Все шаги анализа зафиксированы в виде скриншотов.
Желающие могут поспорить с ними.

1.2 Создать образ Docker на основе Nginx
В каталоге kubernetes-intro/web созданы Dockerfile, nginx.conf, index.html, homework.html
Образ docker собран pol4/simple_web:0.2
После запуска доступна страница по адресу 127.0.0.1:8000

1.3 Разработать манифест web-pod.yaml для создания pod web c меткой app со значением web, содержащего один контейнер с названием web.
Для запуска образа из данного манифеста потребовалось вручную регистрировать локальный образ docker (minikube image load pol4/simple_web:0.2)
После включения в k9s port forwarding под стал доступен по 8000 порту на 127.0.0.1

1.4 Добавить init-контейнер, генерирующий index.html, доступный для контейнера web.
После запуска и настройки формвардинга приложение отозвалось на 8000-м порту с новой страницей.

1.5 Hipster shop
Репозиторий скопирован, docker-образ собран, манифест с ошибками выгружен.
Настроены забытые переменные. Часть приведённых в полном yaml-е front не использует (PORT).
С исправленным yaml-ом pod запустился.
